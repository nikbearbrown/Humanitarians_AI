# AI-Powered Conversational Travel Assistant

[![Python Version](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## Overview

This project implements a conversational AI travel assistant designed to streamline the trip-planning process. Users can interact with the assistant via a chat interface (built with Streamlit) to request itineraries, search for flights and accommodations, get weather forecasts, find local points of interest, calculate driving times, and more.

The system leverages the speed and power of Large Language Models (LLMs) via the Groq API for natural language understanding and synthesizing responses. It integrates real-time data from various travel APIs (Amadeus, Airbnb, Google Maps, WeatherAPI, Brave Search) using the Multi-Context Prompting (MCP) framework for efficient tool communication.

**Goal:** To provide a unified, conversational interface that simplifies travel research and planning by integrating disparate data sources.

## Features

* **Conversational Interface:** Simple and intuitive chat interface using Streamlit.
* **Natural Language Understanding:** Leverages Groq's fast LLMs (e.g., Llama 3) via LangChain to understand complex user requests.
* **Multi-Tool Integration (via MCP):**
    * **✈️ Flight Search:** Finds flight offers using the Amadeus API (with Brave Search as a fallback). Supports origin, destination, specific dates, passenger numbers, and airline preferences. *Travel class (Economy, Business, etc.) is configured via the UI sidebar.*
    * **🏨 Accommodation Search:** Finds Airbnb listings via the `@openbnb/mcp-server-airbnb` tool. Supports location (including "near X" areas), specific dates, guest numbers (adults, children, infants, pets), and budget constraints (per night).
    * **☀️ Weather Information:** Provides current conditions, multi-day forecasts (up to 10 days with AQI and alerts), and future date weather predictions (14-300 days out) via a custom WeatherAPI.com MCP server.
    * **🗺️ Local Discovery (Google Maps):** Finds and provides details (address, rating, map links) for restaurants, museums, attractions, landmarks, specific categories (e.g., coffee shops, BBQ), etc., using the Google Places API.
    * **🚗 Driving Directions (Google Maps):** Calculates estimated driving time and distance between two points using the Google Directions API.
    * **🌐 General Web Search:** Uses the Brave Search API as a fallback for information not covered by specialized tools (e.g., visa info, specific local regulations, currency) or when other tools fail.
* **Intelligent Entity Extraction:** Employs an LLM to parse user prompts and extract key travel parameters like destinations, dates, group composition, and specific needs.
* **Configurable Search Options:** A Streamlit sidebar allows users to preset preferences like flight class, default Airbnb guest numbers, price ranges, weather forecast duration, etc.
* **Contextual Memory:** Retains recent chat history to allow for follow-up questions and more natural conversation flow.
* **Reliable Link Display:** Implements a post-processing step to ensure that key actionable links (e.g., Skyscanner flight search, Airbnb listing/search, Google Maps place/directions) generated by the tools are consistently included in the final response, even if the LLM initially omits them.

## Technology Stack

* **Language:** Python 3.11+
* **Frontend Framework:** Streamlit
* **LLM Orchestration:** LangChain
* **LLM Inference:** Groq API (`langchain-groq`)
* **Tool Communication:** `mcp-client-python` (Multi-Context Prompting)
* **Core APIs & Services:**
    * Amadeus Self-Service APIs (Flights)
    * WeatherAPI.com (Weather)
    * Google Maps Platform APIs (Places, Directions)
    * Brave Search API (Web Search)
    * Airbnb (via `@openbnb/mcp-server-airbnb`)
* **Environment Management:** `python-dotenv`
* **Asynchronous Operations:** `asyncio`
* **Node.js/npm/npx:** Required runtime for the `@openbnb/mcp-server-airbnb` tool.

## Project Structure

```
.
├── frontend/
│   └── app.py          # Main Streamlit application logic
├── src/
│   ├── flight_service.py       # MCP server script for Amadeus Flights
│   ├── gmaps_service.py        # MCP server script for Google Maps Places/Directions
│   ├── search.py               # MCP server script for Brave Search
│   └── custom_weatherapi_mcp.py # MCP server script for WeatherAPI.com
│   └── server.py             # Main API server (if applicable)
│   └── ...                   # Other source files
├── tests/                # Contains test scripts (ignored by Git)
│   ├── test_*.py
│   └── ...
├── .env.example        # Example environment variables file (template)
├── requirements.txt    # Python dependencies for pip (or pyproject.toml/uv.lock)
└── README.md           # This file
```

## Setup and Installation

Follow these steps to set up and run the project locally.

1.  **Prerequisites:**
    * Python (version 3.11 or higher recommended). Verify with `python --version`.
    * `pip` (Python package installer - usually comes with Python) or `uv`.
    * Node.js and `npm`. Verify with `node -v` and `npm -v`. Install from [nodejs.org](https://nodejs.org/) if needed. `npx` comes with `npm`.
    * Git version control system.

2.  **Clone Repository:**
    ```bash
    git clone https://github.com/mitesh699/travel-client.git
    cd travel-client
    ```

3.  **Create and Activate Virtual Environment:**
    (Recommended to isolate project dependencies)
    ```bash
    # Using venv
    python -m venv .venv
    # On macOS/Linux:
    source .venv/bin/activate
    # On Windows:
    # .venv\Scripts\activate

    # OR using uv (if installed)
    # uv venv
    # source .venv/bin/activate
    ```

4.  **Install Python Dependencies:**
    ```bash
    # If using requirements.txt:
    pip install -r requirements.txt

    # If using uv.lock (preferred if present):
    # uv pip sync
    ```
    *(Ensure all necessary packages like `streamlit`, `langchain`, `langchain-groq`, `mcp-client-python`, `python-dotenv`, `googlemaps`, `amadeus`, `requests`, `httpx` are listed in `requirements.txt` or managed by `uv`/`pyproject.toml`)*

5.  **Environment Variables (`.env` File):**
    This project requires API keys and credentials.

    * **Create the file:** Copy the example template if it exists, otherwise create a new file named `.env` in the project's root directory.
        ```bash
        # If .env.example exists:
        # cp .env.example .env
        # Otherwise, create an empty file:
        # touch .env
        ```
    * **Edit `.env`:** Open the `.env` file and add your secret keys. It should follow this format:

        ```dotenv
        # .env - Store your secret API keys here

        # GroqCloud API Key (Required for LLM access)
        # Obtain from: [https://console.groq.com/keys](https://console.groq.com/keys)
        GROQ_API_KEY="gsk_YOUR_GROQ_API_KEY_HERE"

        # Amadeus Self-Service API Credentials (Required for Flight Search)
        # Obtain from: [https://developers.amadeus.com/](https://developers.amadeus.com/)
        # Create a project -> Self-Service workspace -> Create App
        AMADEUS_CLIENT_ID="YOUR_AMADEUS_CLIENT_ID_HERE"
        AMADEUS_CLIENT_SECRET="YOUR_AMADEUS_CLIENT_SECRET_HERE"

        # Google Maps Platform API Key (Required for Places & Directions)
        # Obtain from: [https://console.cloud.google.com/](https://console.cloud.google.com/)
        # Enable "Places API" and "Directions API" for your project.
        # IMPORTANT: Restrict your key for security (e.g., by API, IP address).
        Maps_API_KEY="AIzaSyYOUR_Maps_API_KEY_HERE"

        # Brave Search API Key (Required for General/Fallback Search)
        # Obtain from: [https://brave.com/search/api/](https://brave.com/search/api/)
        BRAVE_API_KEY="YourBraveSearchAPIKey"

        # WeatherAPI.com API Key (Required for Weather Forecasts)
        # Obtain from: [https://www.weatherapi.com/](https://www.weatherapi.com/)
        # Free tier is usually sufficient for development.
        WEATHERAPI_KEY="YourWeatherApiKey"

        # Optional: Specify a different Groq LLM model name if desired
        # Default is often set in the code (e.g., get_llm() function) if not specified here
        # MODEL_NAME="llama3-70b-8192"
        ```
    * **Obtaining API Keys (Detailed Steps):**
        * **`GROQ_API_KEY`:** Go to [GroqCloud Console](https://console.groq.com/keys), sign up/log in, navigate to "API Keys", create a new key.
        * **`AMADEUS_CLIENT_ID` & `AMADEUS_CLIENT_SECRET`:** Register/log in at [Amadeus for Developers](https://developers.amadeus.com/). Create a project, select the **Self-Service** API workspace, and create an "App" within it to get your credentials. Note the free tier limits.
        * **`Maps_API_KEY`:** Go to [Google Cloud Console](https://console.cloud.google.com/). Create/select a project, enable billing. Go to "APIs & Services" > "Library" and **enable** "Places API" and "Directions API". Go to "APIs & Services" > "Credentials", create an "API Key", and **restrict it** (under API restrictions, select only the enabled APIs; consider Application restrictions too).
        * **`BRAVE_API_KEY`:** Sign up at [Brave Search API](https://brave.com/search/api/) to get your key from their dashboard. Note the free tier limits.
        * **`WEATHERAPI_KEY`:** Sign up at [WeatherAPI.com](https://www.weatherapi.com/). The free tier key is available in your account dashboard.

## Running the Application

1.  Make sure your Python virtual environment is activated.
2.  Navigate to the project's root directory in your terminal.
3.  **Start MCP Servers (Required for Tools):**
    You need to run the MCP server scripts for the tools you intend to use. Open separate terminal windows/tabs for each, activate the environment, and run:
    ```bash
    # Weather Server
    python src/custom_weatherapi_mcp.py

    # Google Maps Server
    python src/gmaps_service.py

    # Flight Server
    python src/flight_service.py

    # Brave Search Server
    python src/search.py

    # Airbnb Server (Requires Node.js/npm)
    # This might need specific setup as per @openbnb/mcp-server-airbnb docs
    # Assuming it's started via npx:
    # npx @openbnb/mcp-server-airbnb
    ```
    *(Note: You might implement a main server `src/server.py` or use a process manager like `supervisor` or `pm2` to handle these)*

4.  **Run the Streamlit Frontend:**
    In another terminal window (with the environment activated):
    ```bash
    streamlit run frontend/app.py
    ```
5.  Streamlit will provide a local URL (usually `http://localhost:8501`). Open this URL in your web browser.

## Usage

* Type your travel requests into the chat input at the bottom of the page. Be as specific or general as needed.
* Use the **Sidebar** to configure default settings like flight class, Airbnb guest numbers, price ranges, and weather preferences *before* submitting prompts that rely on these settings.
* The assistant will indicate it's working (interacting with MCP servers in the background) and display the final synthesized response, including relevant data and links. Look for the "**Relevant Links:**" section at the end for key actionable URLs.

**Example Prompts:**

* `What's the weather like in Tokyo right now and for the next 5 days?`
* `Find hotels near Millennium Park in Chicago for 2 adults, checking in next Friday for 3 nights.` (Set preferred flight class in sidebar if also asking for flights).
* `Find pet-friendly Airbnbs near Disneyland for 2 adults, 1 child, checking in June 10th, 2025 for 4 nights, under $400/night.`
* `What's the driving time from San Francisco to Napa? Suggest a good restaurant there for brunch.`
* `Plan a 4-day trip to Seattle from SFO for 2 adults leaving next Thursday. Find round-trip flights (Alaska Airlines preferred). Suggest a hotel near Pike Place Market under $300/night, recommend one art museum, and give the weather forecast.`

## Known Limitations & Areas for Improvement

* **Needs Determination/Entity Extraction:**
    * Can occasionally misinterpret purely local search queries (e.g., might still look for flight context).
    * May sometimes oversimplify Google Maps queries (e.g., searching "restaurants" when "Indian restaurants" was asked). Needs better specific-to-broad fallback logic.
    * Handling of complex constraints within prompts (e.g., "near X", "under Y") could be more robust to avoid impacting location entity extraction.
* **Flight Search:**
    * Does not support flexible date searches ("sometime in July"). Requires specific dates.
    * Flight class is now primarily UI-driven via the sidebar for reliability.
    * "Cheapest" results are based on Amadeus API data returned for the query, not an exhaustive market scan.
* **Accommodation Search:**
    * Filtering by specific amenities (pool, hot tub, etc.) depends on the underlying tool (`@openbnb/mcp-server-airbnb`) and keyword matching, which might not always be precise.
    * Hotel search primarily relies on Airbnb results unless specific keywords trigger Gmaps/Search.
* **Google Maps Places:**
    * Searching for points of interest *along a driving route* is not explicitly implemented.
    * The success of finding highly specific place types (e.g., *only* vegan restaurants) depends heavily on the Google Maps API data and query interpretation.
* **Context Length:** Very long and complex conversations could potentially exceed the LLM's context window limit, impacting response quality, although input truncation is implemented.
* **Real-time Data:** Flight/accommodation prices and availability are snapshots at the time of the API call and can change rapidly.

## Contributing

*(Optional: Add guidelines for contributors if this is an open project)*

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details (if one exists).